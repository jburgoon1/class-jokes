{"ast":null,"code":"var _jsxFileName = \"/Users/julieburgoon/Desktop/react-jokes-classes/src/JokeList.js\";\nimport React, { useState, useEffect, Component } from \"react\";\nimport axios from \"axios\";\nimport Joke from \"./Joke\";\nimport \"./JokeList.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass jokeList extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      jokes: []\n    };\n    this.generateNewJokes = this.generateNewJokes.bind(this);\n    this.vote = this.vote.bind(this);\n    this.getJokes = this.getJokes.bind(this);\n  }\n\n  componentDidMount() {\n    if (this.state.jokes.length < this.props.numJokesToGet) this.getJokes();\n  }\n\n  componentDidUpdate() {\n    if (this.state.jokes.length < this.props.numJokesToGet) this.getJokes();\n  }\n\n  generateNewJokes() {\n    this.setState(j => ({\n      jokes: []\n    }));\n  }\n\n  vote(id, delta) {\n    this.setState.jokes(allJokes => allJokes.map(j => j.id === id ? { ...j,\n      votes: j.votes + delta\n    } : j));\n  }\n\n  async getJokes() {\n    let j = [...this.state.jokes];\n    let seenJokes = new Set();\n\n    try {\n      while (j.length < this.numJokesToGet) {\n        let res = await axios.get(\"https://icanhazdadjoke.com\", {\n          headers: {\n            Accept: \"application/json\"\n          }\n        });\n        let {\n          status,\n          ...jokeObj\n        } = res.data;\n\n        if (!seenJokes.has(jokeObj.id)) {\n          seenJokes.add(jokeObj.id);\n          j.push({ ...jokeObj,\n            votes: 0\n          });\n        } else {\n          console.error(\"duplicate found!\");\n        }\n      }\n\n      this.setState({\n        jokes: j\n      });\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  render() {\n    let sortedJokes = [...this.state.jokes].sort((a, b) => b.votes - a.votes);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"JokeList\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"JokeList-getmore\",\n        onClick: this.generateNewJokes,\n        children: \"Get New Jokes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), sortedJokes.map(j => /*#__PURE__*/_jsxDEV(Joke, {\n        text: j.joke,\n        id: j.id,\n        votes: j.votes,\n        vote: this.vote\n      }, j.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n/* empty joke list and then call getJokes */\n\n/* change vote for this id by delta (+1 or -1) */\n\n/* render: either loading spinner or list of sorted jokes. */\n\n\njokeList.defaultProps = {\n  numJokesToGet: 10\n};\nexport default jokeList;","map":{"version":3,"sources":["/Users/julieburgoon/Desktop/react-jokes-classes/src/JokeList.js"],"names":["React","useState","useEffect","Component","axios","Joke","jokeList","constructor","props","state","jokes","generateNewJokes","bind","vote","getJokes","componentDidMount","length","numJokesToGet","componentDidUpdate","setState","j","id","delta","allJokes","map","votes","seenJokes","Set","res","get","headers","Accept","status","jokeObj","data","has","add","push","console","error","e","log","render","sortedJokes","sort","a","b","joke","defaultProps"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,SAArC,QAAsD,OAAtD;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,IAAP,MAAiB,QAAjB;AACA,OAAO,gBAAP;;;AAIA,MAAMC,QAAN,SAAuBH,SAAvB,CAAgC;AAI9BI,EAAAA,WAAW,CAACC,KAAD,EAAO;AAChB,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AAACC,MAAAA,KAAK,EAAC;AAAP,KAAb;AACA,SAAKC,gBAAL,GAAuB,KAAKA,gBAAL,CAAsBC,IAAtB,CAA2B,IAA3B,CAAvB;AACA,SAAKC,IAAL,GAAY,KAAKA,IAAL,CAAUD,IAAV,CAAe,IAAf,CAAZ;AACA,SAAKE,QAAL,GAAgB,KAAKA,QAAL,CAAcF,IAAd,CAAmB,IAAnB,CAAhB;AACD;;AAEDG,EAAAA,iBAAiB,GAAE;AACjB,QAAI,KAAKN,KAAL,CAAWC,KAAX,CAAiBM,MAAjB,GAA0B,KAAKR,KAAL,CAAWS,aAAzC,EAAwD,KAAKH,QAAL;AACzD;;AAEDI,EAAAA,kBAAkB,GAAE;AAClB,QAAG,KAAKT,KAAL,CAAWC,KAAX,CAAiBM,MAAjB,GAA0B,KAAKR,KAAL,CAAWS,aAAxC,EAAuD,KAAKH,QAAL;AACxD;;AACDH,EAAAA,gBAAgB,GAAG;AACjB,SAAKQ,QAAL,CAAcC,CAAC,KAAK;AAACV,MAAAA,KAAK,EAAC;AAAP,KAAL,CAAf;AACD;;AAEFG,EAAAA,IAAI,CAACQ,EAAD,EAAKC,KAAL,EAAY;AACb,SAAKH,QAAL,CAAcT,KAAd,CAAoBa,QAAQ,IAC1BA,QAAQ,CAACC,GAAT,CAAaJ,CAAC,IAAKA,CAAC,CAACC,EAAF,KAASA,EAAT,GAAc,EAAE,GAAGD,CAAL;AAAQK,MAAAA,KAAK,EAAEL,CAAC,CAACK,KAAF,GAAUH;AAAzB,KAAd,GAAiDF,CAApE,CADF;AAGD;;AAEa,QAARN,QAAQ,GAAG;AACf,QAAIM,CAAC,GAAG,CAAC,GAAG,KAAKX,KAAL,CAAWC,KAAf,CAAR;AACA,QAAIgB,SAAS,GAAG,IAAIC,GAAJ,EAAhB;;AACA,QAAI;AACF,aAAOP,CAAC,CAACJ,MAAF,GAAW,KAAKC,aAAvB,EAAsC;AACpC,YAAIW,GAAG,GAAG,MAAMxB,KAAK,CAACyB,GAAN,CAAU,4BAAV,EAAwC;AACtDC,UAAAA,OAAO,EAAE;AAAEC,YAAAA,MAAM,EAAE;AAAV;AAD6C,SAAxC,CAAhB;AAGA,YAAI;AAAEC,UAAAA,MAAF;AAAU,aAAGC;AAAb,YAAyBL,GAAG,CAACM,IAAjC;;AAEA,YAAI,CAACR,SAAS,CAACS,GAAV,CAAcF,OAAO,CAACZ,EAAtB,CAAL,EAAgC;AAC9BK,UAAAA,SAAS,CAACU,GAAV,CAAcH,OAAO,CAACZ,EAAtB;AACAD,UAAAA,CAAC,CAACiB,IAAF,CAAO,EAAE,GAAGJ,OAAL;AAAcR,YAAAA,KAAK,EAAE;AAArB,WAAP;AACD,SAHD,MAGO;AACLa,UAAAA,OAAO,CAACC,KAAR,CAAc,kBAAd;AACD;AACF;;AACD,WAAKpB,QAAL,CAAc;AAACT,QAAAA,KAAK,EAACU;AAAP,OAAd;AACD,KAfD,CAeE,OAAOoB,CAAP,EAAU;AACVF,MAAAA,OAAO,CAACG,GAAR,CAAYD,CAAZ;AACD;AAGF;;AAKAE,EAAAA,MAAM,GAAE;AACP,QAAIC,WAAW,GAAG,CAAC,GAAG,KAAKlC,KAAL,CAAWC,KAAf,EAAsBkC,IAAtB,CAA2B,CAACC,CAAD,EAAIC,CAAJ,KAAUA,CAAC,CAACrB,KAAF,GAAUoB,CAAC,CAACpB,KAAjD,CAAlB;AACA,wBACE;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA,8BACE;AAAQ,QAAA,SAAS,EAAC,kBAAlB;AAAqC,QAAA,OAAO,EAAE,KAAKd,gBAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,EAKGgC,WAAW,CAACnB,GAAZ,CAAgBJ,CAAC,iBAChB,QAAC,IAAD;AAAM,QAAA,IAAI,EAAEA,CAAC,CAAC2B,IAAd;AAA+B,QAAA,EAAE,EAAE3B,CAAC,CAACC,EAArC;AAAyC,QAAA,KAAK,EAAED,CAAC,CAACK,KAAlD;AAAyD,QAAA,IAAI,EAAE,KAAKZ;AAApE,SAAyBO,CAAC,CAACC,EAA3B;AAAA;AAAA;AAAA;AAAA,cADD,CALH;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AAWA;;AAtE4B;AA4E9B;;AAIA;;AAIA;;;AApFIf,Q,CACG0C,Y,GAAe;AACpB/B,EAAAA,aAAa,EAAE;AADK,C;AA0FxB,eAAeX,QAAf","sourcesContent":["import React, { useState, useEffect, Component } from \"react\";\nimport axios from \"axios\";\nimport Joke from \"./Joke\";\nimport \"./JokeList.css\";\n\n\n\nclass jokeList extends Component{\n  static defaultProps = {\n    numJokesToGet: 10\n  };\n  constructor(props){\n    super(props)\n    this.state = {jokes:[]}\n    this.generateNewJokes= this.generateNewJokes.bind(this)\n    this.vote = this.vote.bind(this)\n    this.getJokes = this.getJokes.bind(this)\n  }\n\n  componentDidMount(){\n    if (this.state.jokes.length < this.props.numJokesToGet) this.getJokes();\n  }\n\n  componentDidUpdate(){\n    if(this.state.jokes.length < this.props.numJokesToGet) this.getJokes()\n  }\n  generateNewJokes() {\n    this.setState(j => ({jokes:[]}));\n  }\n\n vote(id, delta) {\n    this.setState.jokes(allJokes =>\n      allJokes.map(j => (j.id === id ? { ...j, votes: j.votes + delta } : j))\n    );\n  }\n\n  async getJokes() {\n    let j = [...this.state.jokes];\n    let seenJokes = new Set();\n    try {\n      while (j.length < this.numJokesToGet) {\n        let res = await axios.get(\"https://icanhazdadjoke.com\", {\n          headers: { Accept: \"application/json\" }\n        });\n        let { status, ...jokeObj } = res.data;\n\n        if (!seenJokes.has(jokeObj.id)) {\n          seenJokes.add(jokeObj.id);\n          j.push({ ...jokeObj, votes: 0 });\n        } else {\n          console.error(\"duplicate found!\");\n        }\n      }\n      this.setState({jokes:j});\n    } catch (e) {\n      console.log(e);\n    }\n    \n   \n  };\n\n  \n \n\n   render(){\n    let sortedJokes = [...this.state.jokes].sort((a, b) => b.votes - a.votes);\n    return (\n      <div className=\"JokeList\">\n        <button className=\"JokeList-getmore\" onClick={this.generateNewJokes}>\n          Get New Jokes\n        </button>\n  \n        {sortedJokes.map(j => (\n          <Joke text={j.joke} key={j.id} id={j.id} votes={j.votes} vote={this.vote} />\n        ))}\n      </div>\n    );\n   }\n}\n      \n\n \n\n  /* empty joke list and then call getJokes */\n\n  \n\n  /* change vote for this id by delta (+1 or -1) */\n\n  \n\n  /* render: either loading spinner or list of sorted jokes. */\n\n \n  \n  \n\n\nexport default jokeList;\n"]},"metadata":{},"sourceType":"module"}